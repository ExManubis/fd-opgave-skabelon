---
import { Image } from 'astro:assets';
import caseStudy from '@data/caseStudy.json';
const { image } = caseStudy.caseDetails;
const { caseName, category, date, buttonLabel } = caseStudy.caseDetails;
const images = import.meta.glob<{ default: ImageMetadata }>(
    '/src/data/images/*.{jpeg,jpg,png,gif,webp}',
);
if (!images[image]) {
    throw new Error(
        `"${image}" does not exist in glob: "/src/data/images/*.{jpeg,jpg,png,gif,webp}"`,
    );
}
---

<section class="relative">
    <div class="mx-50 my-20 rounded-xl">
        <Image
            src={images[image]()}
            alt="Live Preview"
            class="rounded-2xl object-cover"
        />
    </div>
    <div
        class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-4/6 w-11/12 max-w-3xl flex gap-2 flex-row bg-neutral-900 rounded-xl p-12 justify-between items-center"
    >
        <div class="flex flex-row gap-20">
            <div class="flex flex-col gap-2 text-white font-cabin">
                <h1 class="text-lg font-bold">Case Name</h1>
                <h2 class="text-md">{caseName}</h2>
            </div>
            <div class="flex flex-col gap-2 text-white font-cabin">
                <h1 class="text-lg font-bold">Category</h1>
                <h2 class="text-md">{category}</h2>
            </div>
            <div class="flex flex-col gap-2 text-white font-cabin">
                <h1 class="text-lg font-bold">Date</h1>
                <h2 class="text-md">{date}</h2>
            </div>
        </div>
        <a
            href="#0"
            class="bg-amber-300 text-neutral-800 hover:bg-amber-400 transition-all duration-300 px-4 py-2 rounded-4xl font-lato"
            >{buttonLabel}</a
        >
    </div>
</section>

<section
    class="flex flex-col gap-20 mx-auto px-20 w-full max-w-3xl mt-4 0 leading-relaxed text-neutral-800"
>
    {
        caseStudy.sections.map((section) => (
            <section>
                <h1 class="text-2xl font-bold font-cabin text-neutral-800 mb-4">
                    {section.title}
                </h1>
                <p class="font-lato text-md leading-6">{section.content}</p>
                <ul class="flex flex-col gap-2 mt-6">
                    {section.highlights &&
                        section.highlights.map((highlight) => (
                            <li class="list-disc list-inside">{highlight}</li>
                        ))}
                </ul>
                {section.image && (
                    <Image
                        src={section.image ?? ''}
                        alt={section.title ?? ''}
                        width={1000}
                        height={1000}
                    />
                )}
            </section>
        ))
    }
</section>
